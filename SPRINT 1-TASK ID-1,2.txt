#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<conio.h>

#define ETF_RATE 0.03
#define GEN_TIME (8 * 20)
#define EMP_FILE "empdata.txt"
#define TMP_FILE "tmpdata.txt"
#define USER_FILE "user.txt"
#define ADM "admin"
#define PWD "admin"


void welcome_msg(void);
int user_check();
int useremp_check();
void exit_message(void);
void maskPassword(char password[]);
void manage_employee(void);
void emp_menu(void);
void add_employee(void);
void delete_employee(void);
void edit_employee(void);
void search_employee(void);
void add_user(void);
void display(void);
void print_report(void);
int useremp_check();
void print_slipemp(void);


void welcome_msg(void)
{
        system("cls");
        printf("\t\t\t\t\t\tWELCOME\n");
        printf("\t\t\t\t-------------------------------------\n\n");
        printf("\t\t\t\t      PAYROLL MANAGEMENT SYSTEM\n");
        printf("\t\t\t\t-------------------------------------\n\n");
        printf("\t\t\t\t\t1. Administrator Login \n");
        printf("\n\t\t\t\t\t2. Employee Login \n\n\n");
        printf("\nEnter your choice :  ");
}

int user_check()
{
         char username[10],password[10];
         int isExit=0;
         int flag=0;
         char reply;
         do
         {
     again : system("cls");
             printf("\nUSERNAME >> ");
             scanf("%s",username);
             printf("\nPASSWORD >> ");
             maskPassword(password);
             if(strcmp(username,ADM) !=0 || strcmp(password,PWD) !=0)
             {
      validity : printf("\nUsername or Password is not valid");
                 sleep(1);
           ask : printf("\n\n\nTo go back enter 'Y' else enter 'N':");
                 reply = getche();
                 if(reply == 'Y' || reply == 'y')
                 {
                      flag=1;
                      isExit=1;
                 }
                 else if(reply == 'N' || reply == 'n')
                 {
                     goto again;
                 }
                 else
                 {
                    printf("\nEnter Y or N !!!!");
                    sleep(1);
                    system("cls");
                    goto ask;
                 }
              }
              else
              {
                   isExit=1;
              }
         }while(isExit==0);
         if(flag==1)
         {
             return 1;
         }
}

void maskPassword(char password[30])
{
        char ch;
        int i=0;
        while((ch =_getch())!=13)
        {
                printf("*");
                password[i]=ch;
                i++;
        }
        password[i]='\0';
}

void main_menu(void)
{
        system("cls");
        printf("\t\t\t\t _________________");
        printf("\n\t\t\t\t|\t\t      MENU                     |");
        printf("\n\t\t\t\t|________________|");
        printf("\n\t\t\t\t| [1] MANAGE EMPLOYEES                         |");
        printf("\n\t\t\t\t|________________|");
        printf("\n\t\t\t\t| [2] PRINT REPORT                             |");
        printf("\n\t\t\t\t|________________|");
        printf("\n\t\t\t\t| [3] PRINT SLIP                               |");
        printf("\n\t\t\t\t|________________|");
        printf("\n\t\t\t\t| [4] ADD USER / DELETE USER                   |");
        printf("\n\t\t\t\t|________________|");
        printf("\n\t\t\t\t| [5] EXIT                                     |");
        printf("\n\t\t\t\t|________________|\n");
        printf("\nPLEASE CHOOSE A NUMBER IN THE BOX ABOVE >>> ");
        sleep(1);
}

